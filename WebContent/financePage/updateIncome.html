<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="utf-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title></title> 
    <link href="../page/css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../custom/uimaker/easyui.css">
    <link href="../page/css/process.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../custom/uimaker/icon.css">
    <link href="../page/js/umeditor/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
</head> 
<body>
	<div class="opt-buttons" style="padding-top:10px;">
		<a href="javascript:back()" class="easyui-linkbutton" data-options="iconCls:'icon-back'">返回</a>
		<a href="javascript:save()" class="easyui-linkbutton" data-options="iconCls:'icon-list'">保存</a>
	</div>
	<div class="easyui-tabs1">
      	<table class="kv-table">
			<tbody>
				<tr>
					<td class="kv-label">id</td>
					<td class="kv-content" colspan="5">
						<input id="id" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">年份</td>
					<td class="kv-content" colspan="5">
						<input id="year" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">类型</td>
					<td class="kv-content" colspan="5">
						<select id="type" class="easyui-combobox" name="language" style="height:35px;width:300px;" panelHeight="auto">
		   					<option value="0">&nbsp;</option>
		   	  				<option value="dish">餐厅</option>
		   	  				<option value="room">客房</option>
		   				</select>
					</td>
				</tr>
				<tr>
					<td class="kv-label">一月</td>
					<td class="kv-content" colspan="5">
						<input id="1" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">二月</td>
					<td class="kv-content" colspan="5">
						<input id="2" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">三月</td>
					<td class="kv-content" colspan="5">
						<input id="3" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">四月</td>
					<td class="kv-content" colspan="5">
						<input id="4" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">五月</td>
					<td class="kv-content" colspan="5">
						<input id="5" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">六月</td>
					<td class="kv-content" colspan="5">
						<input id="6" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">七月</td>
					<td class="kv-content" colspan="5">
						<input id="7" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">八月</td>
					<td class="kv-content" colspan="5">
						<input id="8" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">九月</td>
					<td class="kv-content" colspan="5">
						<input id="9" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">十月</td>
					<td class="kv-content" colspan="5">
						<input id="10" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">十一月</td>
					<td class="kv-content" colspan="5">
						<input id="11" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
				<tr>
					<td class="kv-label">十二月</td>
					<td class="kv-content" colspan="5">
						<input id="12" class="easyui-textbox" type="text" name="code" style="width:300px;height:35px;line-height:35px;"></input>
					</td>
				</tr>
			</tbody>
		</table>
      </div>
</body> 

	<script type="text/javascript" src="../custom/jquery.min.js"></script>
    <script type="text/javascript" src="../custom/jquery.easyui.min.js"></script>
<script type="text/javascript">
	var id;
    $(function(){
    	id = GetUID('id');
    	$("#id").textbox('setValue', id);
    	addInfo();
    }); 
    
    function back(){
    	window.location = "incomeList.html";
    }
    
    function addInfo(){
    	var str = new Array;
    	str.push(id);
    	$.ajax({
		      type:"post",
		      url: "getIncomeById.action",
		      data: {
		    	  "str":str
		      },
		      dataType: "json",
		      traditional: true,
		      success: function(result){
		    	  var incomeInfo = result.incomeInfo;
		    	  $("#year").textbox('setValue', incomeInfo.year);
		    	  $("#type").combobox('setValue', incomeInfo.type);
		    	  $("#1").textbox('setValue', incomeInfo.jan);
		    	  $("#2").textbox('setValue', incomeInfo.feb);
		    	  $("#3").textbox('setValue', incomeInfo.mar);
		    	  $("#4").textbox('setValue', incomeInfo.apr);
		    	  $("#5").textbox('setValue', incomeInfo.may);
		    	  $("#6").textbox('setValue', incomeInfo.jun);
		    	  $("#7").textbox('setValue', incomeInfo.jul);
		    	  $("#8").textbox('setValue', incomeInfo.aug);
		    	  $("#9").textbox('setValue', incomeInfo.sept);
		    	  $("#10").textbox('setValue', incomeInfo.oct);
		    	  $("#11").textbox('setValue', incomeInfo.nov);
		    	  $("#12").textbox('setValue', incomeInfo.dec);
		      }
		});
    }
    
    function save(){
    	var str = new Array;
    	str.push(id);
    	var year = $("#year").textbox('getValue');
    	str.push(year);
    	var type = $("#type").combobox('getValue');
		str.push(type);
		str.push($("#1").val());
		str.push($("#2").val());
		str.push($("#3").val());
		str.push($("#4").val());
		str.push($("#5").val());
		str.push($("#6").val());
		str.push($("#7").val());
		str.push($("#8").val());
		str.push($("#9").val());
		str.push($("#10").val());
		str.push($("#11").val());
		str.push($("#12").val());
		$.ajax({
		      type:"post",
		      url: "updateIncome.action",
		      data: {
		    	  "str":str
		      },
		      dataType: "json",
		      traditional: true,
		      success: function(result){
		    	  window.location = "incomeList.html";
		      }
		});
    }
    
    function GetUID(name){
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if(r!=null)return  unescape(r[2]); return null;
   	}
</script>
</html>
    
